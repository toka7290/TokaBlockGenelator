var isChanged=!1,format_version="1.16.100",is_separator_drag=!1,timeoutID,is_can_issue=!0,help_page_num=0,format_json=new Object;class JSONReplace{constructor(){this.replace_point=new Object}register(data){let key=null;return Array.isArray(data)?Math.max.apply(null,data.map(val=>String(val).length))>=5&&data.length>=6||data.join(",").length>=80||data.some(val=>"object"==typeof val)||0==data.length?key=data:(key=getUuid_v4(),this.replace_point[`"${key}"`]=data):"string"==typeof data?(key=getUuid_v4(),this.replace_point[`"${key}"`]=data.replace(/\\[^n\\]|\\$/g,"")):key=data,key}replaceAll(string_json){const keys=Object.keys(this.replace_point);for(let index=0;index<keys.length;index++){const key=keys[index],data=this.replace_point[key];string_json=string_json.replace(key,Array.isArray(data)?JSON.stringify(data).split(/^\[/).join("[ ").split(/,/).join(", ").split(/\]$/).join(" ]"):"string"==typeof data?`"${data}"`:void 0)}return string_json}}class Issue{constructor(){this.error_list=new Array,this.warning_list=new Array,$("ul.issue-list li").remove(),$(".stat-warning,.stat-error").removeClass("stat-warning stat-error")}setIssueList(){$("span.issue-error-num").text("エラー:"+this.error_list.length),$("span.issue-warning-num").text("警告:"+this.warning_list.length),this.warning_list.length<=0&&this.error_list.length<=0?$("ul.issue-list").append("<li>問題はありません</li>"):(this.error_list.forEach(val=>{$("ul.issue-list").append($("<li>").append($("<img>").attr({src:"~/assets/img/error.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(val[0]))),val[1].addClass("stat-error")}),this.warning_list.forEach(val=>{$("ul.issue-list").append($("<li>").append($("<img>").attr({src:"~/assets/img/warning.svg",alt:"",width:"19px",height:"19px"}),$("<p>").text(val[0]))),val[1].addClass("stat-warning")}))}addWarning(issue_comment,issue_element){this.warning_list.push([issue_comment,issue_element])}addError(issue_comment,issue_element){this.error_list.push([issue_comment,issue_element])}}function getUuid_v4(){let chars="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(let i=0,len=chars.length;i<len;i++)switch(chars[i]){case"x":chars[i]=Math.floor(16*Math.random()).toString(16);break;case"y":chars[i]=(Math.floor(4*Math.random())+8).toString(16)}return chars.join("")}function switchHelp(){switch(help_page_num){case 1:return $("#help-content-1").fadeOut("fast"),$("#help-content-2").slideToggle("fast"),void help_page_num++;case 2:return $("#help-content-2").slideToggle("fast"),$("#help-content-3").fadeIn("fast"),void help_page_num++;case 3:return $("#help-content-3").fadeOut("fast"),$("#page-help").hide(),void(help_page_num=0);case 5:return $("#help-content-1").hide(),$("#help-content-2").hide(),$("#help-content-3").hide(),$("#page-help").hide(),void(help_page_num=0);case 0:default:return $("#help-content-1").fadeIn("fast"),void help_page_num++}}function addBlockTabElement(blockTabPanel){const body=blockTabPanel.find(".block-tab-body"),children_len=body.children().length;body.append($("<label>").addClass(`${blockTabPanel.attr("class").replace(" block-tabPanel","")} block-tab-children invisible-Control`).append($("<input>").attr({type:"radio",name:"permutations"}).prop("checked",0==children_len).addClass("permutations block-tab"),$("<div>").addClass("tab-number").text(children_len)));const tab_contents=blockTabPanel.find(".block-tab-contents");tab_contents.append($("#permutation-block-tab").contents().clone().toggleClass("selected",0==children_len))}function changeElement(control_switch){const element_body=control_switch.closest(".element-control").prev(".editor-element-body");control_switch.is(":checked")?element_body.append($("#value-elements-component").contents().filter(`.value-element.${control_switch.attr("name")}`).clone()):element_body.contents().filter(`.value-element.${control_switch.attr("name")}`).remove()}function changeSwitchable(select_elem){const switchable_element=select_elem.closest(".switchable-content").nextAll(".switchable-element");for(let index=0;index<switchable_element.length;index++)switchable_element.eq(index).toggleClass("hide",!switchable_element.eq(index).hasClass(select_elem.val()))}function addTabElement(tab_panel){const body=tab_panel.children(".tab-navigation").children(".tab-body"),child=body.children(":first-child").clone();child.find("input[type=radio]").prop("checked",!1),child.find(".tab-number").text(body.children().length),body.append(child);const tab_contents=tab_panel.children(".tab-contents");tab_contents.append(tab_contents.children("div:first-child").clone().removeClass("selected"))}function addArrayElement(value_input){const array_list=value_input.find(".array-list"),class_name=array_list.find(".array-data:last-child>input").attr("name");value_input.hasClass("type-array-modal")?array_list.append($("<div>").addClass("array-data type-modal").append($("<label>").append($("<div>").addClass("array-num").text(array_list.children().length),$("<input>").attr({type:"button",value:"編集"}).addClass("modal-open")),array_list.find(":first-child .modal").clone())):array_list.append($("<label>").addClass("array-data").append($("<div>").addClass("array-num").text(array_list.children().length),(()=>{const input=$("<input>");if(value_input.hasClass("type-array-integer"))input.attr({type:"number",name:class_name}).addClass(`${class_name} type-array-integer`);else if(value_input.hasClass("type-array-string"))input.attr({type:"text",name:class_name}).addClass(`${class_name} type-array-string`);else if(value_input.hasClass("type-array-select"))return $("<select>").attr("name",class_name).addClass(`${class_name} type-array-select`).append($('<option value="up">上</option>'),$('<option value="down">下</option>'),$('<option value="north">北</option>'),$('<option value="south">南</option>'),$('<option value="east">東</option>'),$('<option value="west">西</option>'),$('<option value="side">側面</option>'),$('<option value="all">全面</option>'));return input})()))}function addEvent(){$(".event.status-block-body").append($("#event-status-block").contents().clone())}function addBlockState(){$(".blockState.status-block-body").append($("#blockState-status-block").contents().clone())}function importJsonFile(){const data=$("#input-file").prop("files")[0],file_reader=new FileReader;file_reader.onload=function(){const json_text=file_reader.result;setJSONData(json_text)};try{file_reader.readAsText(data)}catch(e){console.error("error:"+e)}}function onChangedFormatVersion(){format_version=$("#format-version").val(),Object.keys(format_json).length||setFormatJson();for(const format_key in format_json)$(`.${format_key}`).toggleClass("unsupported",!format_json[format_key].includes(format_version))}function setFormatJson(){let request=new XMLHttpRequest;request.open("GET","json/format.json"),request.responseType="json",request.send(),request.onload=function(){format_json=new Object(request.response)}}function onChangedJSON(){onChangedFlammable(),is_can_issue&&checkIssue(),setDelayIssue(checkIssue);const json_code=getJSONData();$("pre.language-json code.language-json").remove(),$("pre.language-json").append($("<code>").addClass("language-json").text(json_code)),$("textarea#code-buffer").val(json_code),Prism.highlightAll()}function setDelayIssue(func){is_can_issue=!1,"number"==typeof timeoutID&&window.clearTimeout(timeoutID),timeoutID=window.setTimeout((function(){is_can_issue=!0,func()}),500)}function onChangedFlammable(){const flame_odds=$(".components-flammable-flame-odds"),flame_odds_len=flame_odds.length,burn_odds=$(".components-flammable-burn-odds");for(let index=0;index<flame_odds_len;index++){const is_empty="0"==flame_odds.eq(index).val();burn_odds.eq(index).prop("disabled",is_empty),burn_odds.eq(index).closest(".value-element").toggleClass("disabled",is_empty)}}function checkIssue(){const issue_control=new Issue,block_name=$("#description-block-name"),block_ID=block_name.val().split(/:/);let message="";switch(block_ID.length<2?message='[Description:identifier] ブロックIDが ":" で区切られていません。"名前空間:ブロックID"の形式になっている必要があります。':block_ID.length>2?message='[Description:identifier] 不明なID形式です。"名前空間:ブロックID"の形式になっている必要があります。':""==block_ID[1]?message='[Description:identifier] ブロックIDが空です。ブロックIDを入力してください。ブロックIDは"名前空間:ブロックID"を入力してください。':""==block_ID[0]&&(message='[Description:identifier] 名前空間が空です。名前空間を入力してください。ブロックIDは"名前空間:ブロックID"を入力してください。'),""!=message&&issue_control.addError(message,block_name),format_version){case"1.16.100":const status_block_contents=$(".blockState.status-block-content"),status_block_contents_len=status_block_contents.length;for(let index=0;index<status_block_contents_len;index++){const body=status_block_contents.eq(index),key=body.find(".blockState-name").val();if(""==key)issue_control.addWarning(`[BlockState:${index}] プロパティ名が設定されていません。`,body.find(".blockState-name"));else{const type=body.find(".blockState-type").val();switch(type){case"val_Integer":case"val_String":{const array_data=body.find(`.${type}>.value-element input.blockState-integer.type-array-integer,.${type}>.value-element input.blockState-string.type-array-string`),array_data_len=array_data.length;for(let num=0;num<array_data_len;num++)""==array_data.eq(num).val()&&issue_control.addWarning(`[BlockState:${key}:${num}] 空のプロパティがあります。`,array_data.eq(num))}}}}}switch(checkComponents(issue_control,"Components",$("#editor-main .editor-element-body").children()),format_version){case"1.16.100":const status_block_contents=$(".event.status-block-content"),status_block_contents_len=status_block_contents.length;for(let index=0;index<status_block_contents_len;index++){const body=status_block_contents.eq(index),key=body.find(".event-name").val();""==key?issue_control.addError(`[Event:${index}] イベント名が空です。`,body.find(".event-name")):checkEventResponses(issue_control,`Event:${key}`,body.children(".editor-element").children(".editor-element-body").children())}}switch(format_version){case"1.16.100":const conditions=$(".permutations_condition"),conditions_len=conditions.length,container=$(".permutations.block-tab-container");for(let index=0;index<conditions_len;index++){const body=container.eq(index).find(".editor-element-body"),condition=conditions.eq(index).val();""==condition?issue_control.addError(`[Permutations:${index}:condition] 式が入力されていません。`,conditions.eq(index)):checkComponents(issue_control,`Permutations:${index}:Components`,body.children())}}issue_control.setIssueList()}function checkComponents(issue_control,level,value_elements){let element;switch(format_version){case"1.16.100":if(element=value_elements.filter(".components_tag"),element.length){const tag=element.find(".components-tag"),tag_len=tag.length;for(let index=0;index<tag_len;index++)""==tag.eq(index).val()&&issue_control.addWarning(`[${level}:tag:${index}] タグが空です。`,tag.eq(index))}if(element=value_elements.filter(".components_placement_filter"),element.length){const container=element.find(".tab-container"),container_len=container.length;for(let index=0;index<container_len;index++){const block=container.eq(index).find(".components-placement-filter-block-filter");for(let index_block=0;index_block<block.length;index_block++)block.eq(index_block).val(),""==block.eq(index_block).val()&&issue_control.addError(`[${level}:minecraft:placement_filter:tab${index}:block_filter:${index_block}] ブロックが指定されていません。`,block.eq(index_block))}}if(element=value_elements.filter(".components_map_color"),element.length){const input=element.find(".components-map-color"),value=input.val();""==value?issue_control.addError(`[${level}:minecraft:map_color] 色が入力されていません。`,input):/^#[0-9a-fA-F]{3,6}/.test(value)||issue_control.addError(`[${level}:minecraft:map_color] 正しい16進数カラーコードではありません。`,input)}if(element=value_elements.filter(".components_crafting_table"),element.length){const tag=element.find(".components-crafting-table-crafting-tags"),tag_len=tag.length;for(let index=0;index<tag_len;index++)""==tag.eq(index).val()&&issue_control.addWarning(`[${level}:minecraft:crafting_table:crafting_tags:${index}] クラフティングタグが空です。`,tag.eq(index))}if(element=value_elements.filter(".components_geometry"),element.length&&"val_geometry"==element.find(".components-geometry-switch").val()&&""==element.find(".components-geometry").val()&&issue_control.addWarning(`[${level}:minecraft:geometry] ジオメトリが空です。`,element.find(".components-geometry")),element=value_elements.filter(".components_material_instances"),element.length){const face=element.find(".components-material-instances-face"),face_len=face.length,instances_switch=element.find(".components-material-instances-switch");for(let index=0;index<face_len;index++)if("val_definition"==instances_switch.eq(index).val()){let data=element.find(".components-material-instances-texture").eq(index);""==data.val()&&issue_control.addError(`[${level}:minecraft:material_instances:${face.eq(index).val()}:texture] テクスチャが空です。`,data)}}if(element=value_elements.filter(".components_rotation"),element.length&&["x","y","z"].forEach(val=>{let data=element.find(`.components-rotation-${val}`);parseInt(data.val())%90!=0&&issue_control.addWarning(`[${level}:minecraft:rotation:${val}] 角度は90の倍数のみ有効です。その他の値は丸められます。`,data)}),element=value_elements.filter(".components_event_on_fall_on"),element.length){let data=element.find(".components-event-on-fall-on-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_fall_on:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_interact"),element.length){let data=element.find(".components-event-on-interact-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_interact:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_placed"),element.length){let data=element.find(".components-event-on-placed-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_placed:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_player_placing"),element.length){let data=element.find(".components-event-on-player-placing-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_player_placing:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_step_on"),element.length){let data=element.find(".components-event-on-step-on-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_step_on:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_step_off"),element.length){let data=element.find(".components-event-on-step-off-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_step_off:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_on_player_destroyed"),element.length){let data=element.find(".components-event-on-player-destroyed-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:on_player_destroyed:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_ticking"),element.length){let data=element.find(".components-event-ticking-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:ticking:on_tick:event] 呼び出すイベントが指定されていません。`,data)}if(element=value_elements.filter(".components_event_random_ticking"),element.length){let data=element.find(".components-event-random-ticking-event");""==data.val()&&issue_control.addError(`[${level}:minecraft:random_ticking:on_tick:event] 呼び出すイベントが指定されていません。`,data)}break;case"1.16.0":case"1.12.0":default:if(element=value_elements.filter(".components_map_color"),element.length){const input=element.find(".components-map-color"),value=input.val();""==value?issue_control.addError(`[${level}:minecraft:map_color] 色が入力されていません。`,input):/^#[0-9a-fA-F]{3,6}/.test(value)||issue_control.addError(`[${level}:minecraft:map_color] 正しい16進数カラーコードではありません。`,input)}}}function checkEventResponses(issue_control,level,value_elements){let element=value_elements.filter(".event_responses_set_block_property");if(element.length){const element_states=element.find(".event-responses-set-block-state"),element_value=element.find(".event-responses-set-block-value");for(let index=0;index<element_states.length;index++){const state=element_states.eq(index);""==state.val()&&issue_control.addError(`[${level}:set_block_property:${index}] プロパティ名が入力されていません。`,state);const data=element_value.eq(index);""==data.val()&&issue_control.addError(`[${level}:set_block_property:${state.val()}] 値が入力されていません。`,data)}}if(element=value_elements.filter(".event_responses_set_block"),element.length){const block_type=element.find(".event-responses-set-block");""==block_type.val()&&issue_control.addError(`[${level}:set_block:block_type] ブロックが指定されていません。`,block_type)}if(element=value_elements.filter(".event_responses_set_block_at_pos"),element.length){const block_type=element.find(".event-responses-set-block-at-pos-id");""==block_type.val()&&issue_control.addError(`[${level}:set_block_at_pos:block_type] ブロックが指定されていません。`,block_type)}if(element=value_elements.filter(".event_responses_add_mob_effect"),element.length){const data=element.find(".event-responses-add-mob-effect-id");""==data.val()&&issue_control.addError(`[${level}:add_mob_effect:effect] エフェクト名が指定されていません。`,data)}if(element=value_elements.filter(".event_responses_remove_mob_effect"),element.length){const data=element.find(".event-responses-remove-mob-effect-id");""==data.val()&&issue_control.addError(`[${level}:remove_mob_effect:effect] エフェクト名が指定されていません。`,data)}if(element=value_elements.filter(".event_responses_play_effect"),element.length){const data=element.find(".event-responses-play-effect-id");""==data.val()&&issue_control.addError(`[${level}:play_effect:effect] パーティクル名が指定されていません。`,data)}if(element=value_elements.filter(".event_responses_play_sound"),element.length){const data=element.find(".event-responses-play-sound-id");""==data.val()&&issue_control.addError(`[${level}:play_sound:sound] サウンド名が指定されていません。`,data)}if(element=value_elements.filter(".event_responses_transform_item"),element.length){const data=element.find(".event-responses-transform-item-id");""==data.val()&&issue_control.addError(`[${level}:transform_item:transform] アイテム名が指定されていません。`,data)}if(element=value_elements.filter(".event_responses_trigger"),element.length){const data=element.find(".event-responses-trigger-event"),reg=new RegExp(`^Event:${data.val()}`);""==data.val()?issue_control.addError(`[${level}:trigger:event] イベント名が指定されていません。`,data):reg.test(level)&&issue_control.addError(`[${level}:trigger:event] 循環参照です。`,data)}if(element=value_elements.filter(".event_responses_run_command"),element.length){const command=element.find(".event-responses-run-command"),command_len=command.length;for(let index=0;index<command_len;index++){const data=command.eq(index);""==data.val()&&issue_control.addError(`[${level}:run_command:command] コマンドが入力されていません。`,data)}}if(element=value_elements.filter(".event_responses_sequence"),element.length){const container=element.closestOpposite(".tab-contents").children(".tab-container"),container_len=container.length;for(let index=0;index<container_len;index++)checkEventResponses(issue_control,`${level}:sequence:${index}`,container.eq(index).children(".editor-element-body").children())}if(element=value_elements.filter(".event_responses_randomize"),element.length){const container=element.closestOpposite(".tab-contents").children(".tab-container"),container_len=container.length;for(let index=0;index<container_len;index++)checkEventResponses(issue_control,`${level}:randomize:${index}`,container.eq(index).children(".editor-element-body").children())}}function getJSONData(){const DataReplacer=new JSONReplace;let json_raw={};json_raw.format_version=format_version,json_raw["minecraft:block"]=new Object;let description=new Object;switch(description.identifier=$("#description-block-name").val(),format_version){case"1.16.100":const status_block_contents=$(".blockState.status-block-content"),status_block_contents_len=status_block_contents.length,name_list=$("#blockState-name-list");if(name_list.children().remove(),(()=>{for(let index=0;index<status_block_contents_len;index++)if(""!=$(".blockState-name").eq(index).val())return!0;return!1})()){let properties=new Object;for(let index=0;index<status_block_contents_len;index++){const body=status_block_contents.eq(index),key=body.find(".blockState-name").val();if(""!=key){const type=body.find(".blockState-type").val();let data_list=new Array;switch(type){case"val_Integer":{const array_data=body.find(`.${type}>.value-element input.blockState-integer.type-array-integer`),array_data_len=array_data.length;for(let num=0;num<array_data_len;num++)""!=array_data.eq(num).val()&&data_list.push(Number(array_data.eq(num).val()))}break;case"val_String":{const array_data=body.find(`.${type}>.value-element input.blockState-string.type-array-string`),array_data_len=array_data.length;for(let num=0;num<array_data_len;num++)""!=array_data.eq(num).val()&&data_list.push(array_data.eq(num).val())}break;case"val_Boolean":default:const bool=body.find(".blockState-boolean").is(":checked");data_list=[bool,!bool]}properties[key]=DataReplacer.register(data_list),name_list.append($("<option>").attr("value",key))}}description.properties=properties}break;case"1.16.0":case"1.12.0":description.is_experimental=$("#description-is-experimental").is(":checked"),description["register_to_creative-menu"]=$("#description-register-to-creative-menu").is(":checked")}switch(json_raw["minecraft:block"].description=description,json_raw["minecraft:block"].components=getComponents($("#editor-main .editor-element-body").children(),format_version,DataReplacer),format_version){case"1.16.100":const status_block_contents=$(".event.status-block-content"),status_block_contents_len=status_block_contents.length,name_list=$("#event-name-list");if(name_list.children().remove(),(()=>{for(let index=0;index<status_block_contents_len;index++)if(""!=$(".event-name").eq(index).val())return!0;return!1})()){let events=new Object;for(let index=0;index<status_block_contents_len;index++){const body=status_block_contents.eq(index),key=body.find(".event-name").val();if(""!=key){const value_element=body.children(".editor-element").children(".editor-element-body").children();events[key]=getEventResponses(value_element,DataReplacer),name_list.append($("<option>").attr("value",key))}}json_raw["minecraft:block"].events=events}}switch(format_version){case"1.16.100":const conditions=$(".permutations_condition"),conditions_len=conditions.length;if((()=>{for(let index=0;index<conditions_len;index++)if(""!=conditions.eq(index).val())return!0;return!1})()){let permutations=new Array;const container=$(".permutations.block-tab-container");for(let index=0;index<conditions_len;index++){const body=container.eq(index).find(".editor-element-body"),condition=conditions.eq(index).val();if(""!=condition){let data=new Object;data.condition=condition,data.components=getComponents(body.children(),format_version,DataReplacer),permutations.push(data)}}json_raw["minecraft:block"].permutations=permutations}}return DataReplacer.replaceAll(JSON.stringify(json_raw,null,"  "))}function getComponents(value_elements,version,Replacer){let components=new Object,element;switch(version){case"1.16.100":if(element=value_elements.filter(".components_loot"),element.length&&(components["minecraft:loot"]=element.find(".components-loot").val()),element=value_elements.filter(".components_display_name"),element.length&&(components["minecraft:display_name"]=Replacer.register(element.find(".components-display-name").val())),element=value_elements.filter(".components_tag"),element.length){const tag=element.find(".components-tag"),tag_len=tag.length;for(let index=0;index<tag_len;index++)components[`tag:${tag.eq(index).val()}`]=new Object}if(element=value_elements.filter(".components_placement_filter"),element.length){components["minecraft:placement_filter"]=new Object;const container=element.find(".tab-container"),container_len=container.length;let condition_list=new Array;for(let index=0;index<container_len;index++){let condition=new Object;const face=container.eq(index).find(".components-placement-filter-allowed-faces");let allowed_faces=new Array;for(let index_face=0;index_face<face.length&&index_face<=8;index_face++)allowed_faces.push(face.eq(index_face).val());condition.allowed_faces=Replacer.register(allowed_faces);const block=container.eq(index).find(".components-placement-filter-block-filter");let block_filter=new Array;for(let index_block=0;index_block<block.length;index_block++){let value=block.eq(index_block).val();try{block_filter.push(JSON.parse(value))}catch{block_filter.push(value)}}condition.block_filter=Replacer.register(block_filter),condition_list.push(condition)}components["minecraft:placement_filter"].conditions=condition_list}if(element=value_elements.filter(".components_preventsjumping"),element.length&&(components["minecraft:preventsjumping"]=element.find(".components-preventsJumping").is(":checked")),element=value_elements.filter(".components_unwalkable"),element.length&&(components["minecraft:unwalkable"]=element.find(".components-unwalkable").is(":checked")),element=value_elements.filter(".components_map_color"),element.length&&(components["minecraft:map_color"]=element.find(".components-map-color").val()),element=value_elements.filter(".components_crafting_table"),element.length){let crafting_table=new Object;crafting_table.grid_size=Number(element.find(".components-crafting-table-grid-size").val());const tag=element.find(".components-crafting-table-crafting-tags"),tag_len=tag.length;let crafting_tags=new Array;for(let index=0;index<tag_len;index++)crafting_tags.push(tag.eq(index).val());crafting_table.crafting_tags=Replacer.register(crafting_tags),crafting_table.custom_description=Replacer.register(element.find(".components-crafting-table-custom-description").val()),components["minecraft:crafting_table"]=crafting_table}if(element=value_elements.filter(".components_geometry"),element.length)switch(element.find(".components-geometry-switch").val()){case"val_geometry":components["minecraft:geometry"]=element.find(".components-geometry").val();break;case"val_cube":components["minecraft:unit_cube"]=new Object}if(element=value_elements.filter(".components_material_instances"),element.length){let data=new Object;const face=element.find(".components-material-instances-face"),face_len=face.length,instances_switch=element.find(".components-material-instances-switch");for(let index=0;index<face_len;index++)switch(instances_switch.eq(index).val()){case"val_refer":data[face.eq(index).val()]=element.find(".components-material-instances-refer-face").eq(index).val();break;case"val_definition":default:let instance=new Object;instance.texture=element.find(".components-material-instances-texture").eq(index).val(),instance.render_method=element.find(".components-material-instances-material").eq(index).val(),data[face.eq(index).val()]=instance}components["minecraft:material_instances"]=data}if(element=value_elements.filter(".components_entity_collision"),element.length){let val;switch(element.find(".components-entity-collision-switch").val()){case"val_simple":val=element.find(".components-entity-collision-simple").is(":checked");break;case"val_details":val=new Object,val.origin=Replacer.register([Number(element.find(".components-entity-collision-origin-x").val()),Number(element.find(".components-entity-collision-origin-y").val()),Number(element.find(".components-entity-collision-origin-z").val())]),val.size=Replacer.register([Number(element.find(".components-entity-collision-size-x").val()),Number(element.find(".components-entity-collision-size-y").val()),Number(element.find(".components-entity-collision-size-z").val())])}components["minecraft:entity_collision"]=val}if(element=value_elements.filter(".components_pick_collision"),element.length){let val;switch(element.find(".components-pick-collision-switch").val()){case"val_simple":val=element.find(".components-pick-collision-simple").is(":checked");break;case"val_details":val=new Object,val.origin=Replacer.register([Number(element.find(".components-pick-collision-origin-x").val()),Number(element.find(".components-pick-collision-origin-y").val()),Number(element.find(".components-pick-collision-origin-z").val())]),val.size=Replacer.register([Number(element.find(".components-pick-collision-size-x").val()),Number(element.find(".components-pick-collision-size-y").val()),Number(element.find(".components-pick-collision-size-z").val())])}components["minecraft:pick_collision"]=val}if(element=value_elements.filter(".components_rotation"),element.length&&(components["minecraft:rotation"]=Replacer.register([parseInt(element.find(".components-rotation-x").val(),10),parseInt(element.find(".components-rotation-y").val(),10),parseInt(element.find(".components-rotation-z").val(),10)])),element=value_elements.filter(".components_breathability"),element.length&&(components["minecraft:breathability"]=element.find(".components-breathability").val()),element=value_elements.filter(".components_block_light_absorption"),element.length&&(components["minecraft:block_light_absorption"]=parseInt(element.find(".components-block-light-absorption").val(),10)),element=value_elements.filter(".components_block_light_emission"),element.length&&(components["minecraft:block_light_emission"]=Number(element.find(".components-block-light-emission").val())),element=value_elements.filter(".components_destroy_time"),element.length&&(components["minecraft:destroy_time"]=Number(element.find(".components-destroy-time").val())),element=value_elements.filter(".components_explosion_resistance"),element.length&&(components["minecraft:explosion_resistance"]=Number(element.find(".components-explosion-resistance").val())),element=value_elements.filter(".components_breakonpush"),element.length&&(components["minecraft:breakonpush"]=element.find(".components-breakonpush").is(":checked")),element=value_elements.filter(".components_immovable"),element.length&&(components["minecraft:immovable"]=element.find(".components-immovable").is(":checked")),element=value_elements.filter(".components_onlypistonpush"),element.length&&(components["minecraft:onlypistonpush"]=element.find(".components-onlypistonpush").is(":checked")),element=value_elements.filter(".components_friction"),element.length&&(components["minecraft:friction"]=Number(element.find(".components-friction").val())),element=value_elements.filter(".components_flammable"),element.length){let flammable=new Object;flammable.flame_odds=parseInt(element.find(".components-flammable-flame-odds").val(),10),flammable.burn_odds=parseInt(element.find(".components-flammable-burn-odds").val(),10),components["minecraft:flammable"]=flammable}if(element=value_elements.filter(".components_event_on_fall_on"),element.length){let content=new Object;content.event=element.find(".components-event-on-fall-on-event").val();let val=element.find(".components-event-on-fall-on-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-fall-on-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_fall_on"]=content}if(element=value_elements.filter(".components_event_on_interact"),element.length){let content=new Object;content.event=element.find(".components-event-on-interact-event").val();let val=element.find(".components-event-on-interact-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-interact-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_interact"]=content}if(element=value_elements.filter(".components_event_on_placed"),element.length){let content=new Object;content.event=element.find(".components-event-on-placed-event").val();let val=element.find(".components-event-on-placed-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-placed-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_placed"]=content}if(element=value_elements.filter(".components_event_on_player_placing"),element.length){let content=new Object;content.event=element.find(".components-event-on-player-placing-event").val();let val=element.find(".components-event-on-player-placing-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-player-placing-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_player_placing"]=content}if(element=value_elements.filter(".components_event_on_step_on"),element.length){let content=new Object;content.event=element.find(".components-event-on-step-on-event").val();let val=element.find(".components-event-on-step-on-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-step-on-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_step_on"]=content}if(element=value_elements.filter(".components_event_on_step_off"),element.length){let content=new Object;content.event=element.find(".components-event-on-step-off-event").val();let val=element.find(".components-event-on-step-off-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-step-off-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_step_off"]=content}if(element=value_elements.filter(".components_event_on_player_destroyed"),element.length){let content=new Object;content.event=element.find(".components-event-on-player-destroyed-event").val();let val=element.find(".components-event-on-player-destroyed-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-on-player-destroyed-target").val(),"default"!=val&&(content.target=val),components["minecraft:on_player_destroyed"]=content}if(element=value_elements.filter(".components_event_ticking"),element.length){components["minecraft:ticking"]=new Object;let content=new Object;content.event=element.find(".components-event-ticking-event").val();let val=element.find(".components-event-ticking-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-ticking-target").val(),"default"!=val&&(content.target=val),components["minecraft:ticking"].on_tick=content,components["minecraft:ticking"].range=Replacer.register([Number(element.find(".components-event-ticking-range-x").val()),Number(element.find(".components-event-ticking-range-z").val())]),components["minecraft:ticking"].looping=element.find(".components-event-ticking-looping").is(":checked")}if(element=value_elements.filter(".components_event_random_ticking"),element.length){components["minecraft:random_ticking"]=new Object;let content=new Object;content.event=element.find(".components-event-random-ticking-event").val();let val=element.find(".components-event-random-ticking-condition").val();""!=val&&(content.condition=val),val=element.find(".components-event-random-ticking-target").val(),"default"!=val&&(content.target=val),components["minecraft:random_ticking"].on_tick=content}break;case"1.16.0":if(element=value_elements.filter(".components_loot"),element.length&&(components["minecraft:loot"]=element.find(".components-loot").val()),element=value_elements.filter(".components_destroy_time"),element.length&&(components["minecraft:destroy_time"]=Number(element.find(".components-destroy-time").val())),element=value_elements.filter(".components_explosion_resistance"),element.length&&(components["minecraft:explosion_resistance"]=Number(element.find(".components-explosion-resistance").val())),element=value_elements.filter(".components_friction"),element.length&&(components["minecraft:friction"]=Number(element.find(".components-friction").val())),element=value_elements.filter(".components_flammable"),element.length){let flammable=new Object;flammable.flame_odds=parseInt(element.find(".components-flammable-flame-odds").val(),10),flammable.burn_odds=parseInt(element.find(".components-flammable-burn-odds").val(),10),components["minecraft:flammable"]=flammable}element=value_elements.filter(".components_map_color"),element.length&&(components["minecraft:map_color"]=element.find(".components-map-color").val()),element=value_elements.filter(".components_block_light_absorption"),element.length&&(components["minecraft:block_light_absorption"]=parseInt(element.find(".components-block-light-absorption").val(),10)),element=value_elements.filter(".components_block_light_emission"),element.length&&(components["minecraft:block_light_emission"]=Number(element.find(".components-block-light-emission").val()));break;case"1.12.0":element=value_elements.filter(".components_loot"),element.length&&(components["minecraft:loot"]=new Object,components["minecraft:loot"].table=element.find(".components-loot").val()),element=value_elements.filter(".components_destroy_time"),element.length&&(components["minecraft:destroy_time"]=new Object,components["minecraft:destroy_time"].value=Number(element.find(".components-destroy-time").val())),element=value_elements.filter(".components_explosion_resistance"),element.length&&(components["minecraft:explosion_resistance"]=new Object,components["minecraft:explosion_resistance"].value=Number(element.find(".components-explosion-resistance").val())),element=value_elements.filter(".components_friction"),element.length&&(components["minecraft:friction"]=new Object,components["minecraft:friction"].value=Number(element.find(".components-friction").val())),element=value_elements.filter(".components_flammable"),element.length&&(components["minecraft:flammable"]=new Object,components["minecraft:flammable"].flame_odds=parseInt(element.find(".components-flammable-flame-odds").val(),10),components["minecraft:flammable"].burn_odds=parseInt(element.find(".components-flammable-burn-odds").val(),10)),element=value_elements.filter(".components_map_color"),element.length&&(components["minecraft:map_color"]=new Object,components["minecraft:map_color"].color=element.find(".components-map-color").val()),element=value_elements.filter(".components_block_light_absorption"),element.length&&(components["minecraft:block_light_absorption"]=new Object,components["minecraft:block_light_absorption"].value=parseInt(element.find(".components-block-light-absorption").val(),10)),element=value_elements.filter(".components_block_light_emission"),element.length&&(components["minecraft:block_light_emission"]=new Object,components["minecraft:block_light_emission"].emission=Number(element.find(".components-block-light-emission").val()))}return components}function getEventResponses(value_elements,Replacer){let event_responses=new Object,element=value_elements.filter(".event_responses_set_block_property");if(element.length){event_responses.set_block_property=new Object;let states=new Object;const element_states=element.find(".event-responses-set-block-state"),element_value=element.find(".event-responses-set-block-value");for(let index=0;index<element_states.length;index++)states[element_states.eq(index).val()]=element_value.eq(index).val();event_responses.set_block_property=states}if(element=value_elements.filter(".event_responses_set_block"),element.length){let content=new Object;const block_type=element.find(".event-responses-set-block").val();try{content.block_type=""!=block_type?JSON.parse(block_type):""}catch(error){content.block_type=block_type}event_responses.set_block=content}if(element=value_elements.filter(".event_responses_set_block_at_pos"),element.length){let content=new Object;const block_type=element.find(".event-responses-set-block-at-pos-id").val();try{content.block_type=""!=block_type?JSON.parse(block_type):""}catch(error){content.block_type=block_type}content.block_offset=Replacer.register([Number(element.find(".event-responses-set-block-at-pos-position-x").val()),Number(element.find(".event-responses-set-block-at-pos-position-y").val()),Number(element.find(".event-responses-set-block-at-pos-position-z").val())]),event_responses.set_block_at_pos=content}if(element=value_elements.filter(".event_responses_spawn_loot"),element.length&&(event_responses.spawn_loot=new Object,event_responses.spawn_loot.table=element.find(".event-responses-spawn-loot").val()),element=value_elements.filter(".event_responses_add_mob_effect"),element.length){let content=new Object;content.effect=element.find(".event-responses-add-mob-effect-id").val(),content.amplifier=Number(element.find(".event-responses-add-mob-effect-amplifier").val()),content.duration=Number(element.find(".event-responses-add-mob-effect-duration").val()),"default"!=element.find(".event-responses-add-mob-effect-target").val()&&(content.target=element.find(".event-responses-add-mob-effect-target").val()),event_responses.add_mob_effect=content}if(element=value_elements.filter(".event_responses_remove_mob_effect"),element.length){let content=new Object;content.effect=element.find(".event-responses-remove-mob-effect-id").val(),"default"!=element.find(".event-responses-remove-mob-effect-target").val()&&(content.target=element.find(".event-responses-remove-mob-effect-target").val()),event_responses.remove_mob_effect=content}if(element=value_elements.filter(".event_responses_damage"),element.length){let content=new Object;content.type=element.find(".event-responses-damage-type").val(),content.amount=parseInt(element.find(".event-responses-damage-amount").val(),10),"default"!=element.find(".event-responses-damage-target").val()&&(content.target=element.find(".event-responses-damage-target").val()),event_responses.damage=content}if(element=value_elements.filter(".event_responses_decrement_stack"),element.length){let content=new Object;content.ignore_game_mode=element.find(".event-responses-decrement-stack-ignore-game-mode").is(":checked"),event_responses.decrement_stack=content}if(element=value_elements.filter(".event_responses_die"),element.length){let content=new Object;"default"!=element.find(".event-responses-die-target").val()&&(content.target=element.find(".event-responses-die-target").val()),event_responses.die=content}if(element=value_elements.filter(".event_responses_play_effect"),element.length){let content=new Object;content.effect=element.find(".event-responses-play-effect-id").val(),content.data=parseInt(element.find(".event-responses-play-effect-data").val(),10),"default"!=element.find(".event-responses-play-effect-target").val()&&(content.target=element.find(".event-responses-play-effect-target").val()),event_responses.play_effect=content}if(element=value_elements.filter(".event_responses_play_sound"),element.length){let content=new Object;content.sound=element.find(".event-responses-play-sound-id").val(),"default"!=element.find(".event-responses-play-sound-target").val()&&(content.target=element.find(".event-responses-play-sound-target").val()),event_responses.play_sound=content}if(element=value_elements.filter(".event_responses_teleport"),element.length){let content=new Object;content.destination=Replacer.register([Number(element.find(".event-responses-teleport-destination-x").val()),Number(element.find(".event-responses-teleport-destination-y").val()),Number(element.find(".event-responses-teleport-destination-z").val())]),content.max_range=Replacer.register([Number(element.find(".event-responses-teleport-max-range-x").val()),Number(element.find(".event-responses-teleport-max-range-y").val()),Number(element.find(".event-responses-teleport-max-range-z").val())]),content.avoid_water=element.find(".event-responses-teleport-avoid_water").is(":checked"),content.land_on_block=element.find(".event-responses-teleport-land-on-block").is(":checked"),"default"!=element.find(".event-responses-teleport-target").val()&&(content.target=element.find(".event-responses-teleport-target").val()),event_responses.teleport=content}if(element=value_elements.filter(".event_responses_transform_item"),element.length&&(event_responses.transform_item=new Object,event_responses.transform_item.transform=element.find(".event-responses-transform-item-id").val()),element=value_elements.filter(".event_responses_trigger"),element.length){let content=new Object;content.event=element.find(".event-responses-trigger-event").val();let val=element.find(".event-responses-trigger-condition").val();""!=val&&(content.condition=val),val=element.find(".event-responses-trigger-target").val(),"default"!=val&&(content.target=val),event_responses.trigger=content}if(element=value_elements.filter(".event_responses_run_command"),element.length){let content=new Object;const command=element.find(".event-responses-run-command"),command_len=command.length;let command_array=new Array;for(let index=0;index<command_len;index++){const val=command.eq(index).val();""!=val&&command_array.push(val)}content.command=command_array,"default"!=element.find(".event-responses-run-command-target").val()&&(content.target=element.find(".event-responses-run-command-target").val()),event_responses.run_command=content}if(element=value_elements.filter(".event_responses_swing"),element.length&&(event_responses.swing=new Object),element=value_elements.filter(".event_responses_sequence"),element.length){const container=element.closestOpposite(".tab-contents").children(".tab-container"),container_len=container.length;let content=new Array;for(let index=0;index<container_len;index++){const child=getEventResponses(container.eq(index).children(".editor-element-body").children());0!=Object.keys(child).length&&content.push(child)}event_responses.sequence=content}if(element=value_elements.filter(".event_responses_randomize"),element.length){const container=element.closestOpposite(".tab-contents").children(".tab-container"),container_len=container.length;let content=new Array;for(let index=0;index<container_len;index++){let data=getEventResponses(container.eq(index).children(".editor-element-body").children());0!=Object.keys(data).length&&(data.weight=Number(element.find(".event-responses-randomize-weight").eq(index).val()),content.push(data))}event_responses.randomize=content}return event_responses}function getErrorText(json="",message=""){let messageText="有効なjsonではありません。";if(""==json||""==message)return messageText;const splitText=message.split(" "),lineIndex=splitText.findIndex(element=>"line"==element),positionIndex=splitText.findIndex(element=>"position"==element),getBeginningOfLineIndex=maxLine=>{let lastIndex=0;for(let i=1;i<maxLine;i++)lastIndex=json.indexOf("\n",lastIndex)+1;return lastIndex};if(-1!=lineIndex||-1!=positionIndex){const line=-1!=lineIndex?parseInt(splitText[lineIndex+1],10):json.substring(0,parseInt(splitText[positionIndex+1],10)).match(/\n/g).length+1,prevLineIndex=getBeginningOfLineIndex(line-1),LineLastIndex=getBeginningOfLineIndex(line+1)-1;messageText+=`\n${line-1}~${line}行目で問題が発生しました。\n${json.substring(prevLineIndex,LineLastIndex)}`}return messageText}function setJSONData(json_text=""){let json_data;try{json_data=JSON.parse(json_text.replace(/\/\/.*|\/\*[^]*\*\//gi,""))}catch(e){return window.alert(getErrorText(json_text,e.message)),void console.error("error:"+e)}if(null!=json_data.format_version)switch(format_version=json_data.format_version){case"1.16.100":case"1.16.0":case"1.12.0":break;default:const temp=format_version.split(/,/).map(str=>Number(str));temp[0]>=1&&temp[1]>=16&&temp[2]>=100?format_version="1.16.100":1==temp[0]&&16==temp[1]&&temp[2]>=0?format_version="1.16.0":temp[0]<=1&&temp[1]<16&&(format_version="1.12.0")}$("#format-version").val(format_version),onChangedFormatVersion();const description=json_data["minecraft:block"].description;if(null!=description.identifier&&$("#description-block-name").val(description.identifier),null!=description.is_experimental&&$("#description-is-experimental").prop("checked",description.is_experimental),null!=description.register_to_creative_menu&&$("#description-register-to-creative-menu").prop("checked",description.register_to_creative_menu),null!=description.properties){const keys=Object.keys(description.properties);for(let index=0;index<keys.length;index++){addBlockState();const block_content=$(".blockState.status-block-content").eq(index);block_content.find(".blockState-name").val(keys[index]);const states=description.properties[keys[index]],type_switch=block_content.find(".blockState-type");switch(typeof states[0]){case"number":type_switch.val("val_Integer");for(let states_index=0;states_index<states.length;states_index++)0!=states_index&&addArrayElement(block_content.find(".switchable-element.val_Integer .value-input")),block_content.find(".blockState-integer").eq(states_index).val(states[states_index]);break;case"string":type_switch.val("val_String");for(let states_index=0;states_index<states.length;states_index++)0!=states_index&&addArrayElement(block_content.find(".switchable-element.val_String .value-input")),block_content.find(".blockState-string").eq(states_index).val(states[states_index]);break;case"boolean":default:type_switch.val("val_Boolean"),block_content.find(".blockState-boolean").prop("checked",states[0])}changeSwitchable(type_switch)}}if(setComponents($("#editor-main>:last-child"),format_version,json_data["minecraft:block"].components),null!=json_data["minecraft:block"].events){const keys=Object.keys(json_data["minecraft:block"].events);for(let index=0;index<keys.length;index++)addEvent(),$(".event-name").eq(index).val(keys[index]),setEventResponses($(".event.status-block-content").eq(index),json_data["minecraft:block"].events[keys[index]])}if(null!=json_data["minecraft:block"].permutations){const permutations=json_data["minecraft:block"].permutations;for(let index=0;index<permutations.length;index++)addBlockTabElement($("#editor-permutations .permutations.block-tabPanel")),null!=permutations[index].condition&&$(".permutations_condition").eq(index).val(permutations[index].condition),setComponents($(".permutations.block-tab-container").eq(index).find(".editor-element:last-child"),format_version,permutations[index].components)}onChangedJSON()}function setComponents(element_scope,version,import_data=new Object){const element_control=element_scope.closestOpposite(".editor-element-footer.element-control .modal-body").children(),value_elements=element_scope.closestOpposite(".editor-element-body");let is_exist;switch(version){case"1.16.100":is_exist=null!=import_data["minecraft:loot"],changeElement(element_control.filter(".components_loot").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_loot").find(".components-loot").val(import_data["minecraft:loot"]),is_exist=null!=import_data["minecraft:display_name"],changeElement(element_control.filter(".components_display_name").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_display_name").find(".components-display-name").val(import_data["minecraft:display_name"]);const tags=null!=import_data?Object.keys(import_data).filter(val=>null!=val.match(/^tag:/g)):[];if(changeElement(element_control.filter(".components_tag").find(".element-control-switch").prop("checked",tags.length)),tags.length){const inner_element=value_elements.children(".components_tag");for(let index=0;index<tags.length;index++)0!=index&&addArrayElement(inner_element.find(".value-input")),inner_element.find(".components-tag").eq(index).val(tags[index].replace(/^tag:/g,""))}if(is_exist=null!=import_data["minecraft:placement_filter"],changeElement(element_control.filter(".components_placement_filter").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:placement_filter"].conditions,inner_element=value_elements.children(".components_placement_filter");for(let index=0;index<inner_json.length;index++){0!=index&&addTabElement(inner_element.find(".tabpanel"));let data=inner_json[index].allowed_faces;if(null!=data)for(let faces_index=0;faces_index<data.length;faces_index++)0!=faces_index&&addArrayElement(inner_element.find(".value-input.type-array-select")),inner_element.find(".components-placement-filter-allowed-faces").eq(faces_index).val(data[faces_index]);if(data=inner_json[index].block_filter,null!=data)for(let block_index=0;block_index<data.length;block_index++){0!=block_index&&addArrayElement(inner_element.find(".value-input.type-array-string"));let filter=data[block_index];"object"==typeof filter&&(filter=JSON.stringify(filter)),inner_element.find(".components-placement-filter-block-filter").eq(block_index).val(filter)}}}if(is_exist=null!=import_data["minecraft:preventsjumping"],changeElement(element_control.filter(".components_preventsjumping").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_preventsjumping").find(".components-preventsJumping").prop("checked",import_data["minecraft:preventsjumping"]),is_exist=null!=import_data["minecraft:unwalkable"],changeElement(element_control.filter(".components_unwalkable").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_unwalkable").find(".components-unwalkable").prop("checked",import_data["minecraft:unwalkable"]),is_exist=null!=import_data["minecraft:map_color"],changeElement(element_control.filter(".components_map_color").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_map_color").find(".components-map-color").val(import_data["minecraft:map_color"]),is_exist=null!=import_data["minecraft:crafting_table"],changeElement(element_control.filter(".components_crafting_table").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_element=value_elements.children(".components_crafting_table");let json_content=import_data["minecraft:crafting_table"].grid_size;if(null!=json_content&&inner_element.find(".components-crafting-table-grid-size").val(json_content),json_content=import_data["minecraft:crafting_table"].crafting_tags,null!=json_content)for(let index=0;index<json_content.length;index++)0!=index&&addArrayElement(inner_element.find(".components-crafting-table-crafting-tags").closest(".value-input")),inner_element.find(".components-crafting-table-crafting-tags").eq(index).val(json_content[index]);json_content=import_data.custom_description,null!=json_content&&inner_element.find(".components-crafting-table-custom-description").val(json_content)}if(is_exist=null!=import_data["minecraft:geometry"]||null!=import_data["minecraft:unit_cube"],changeElement(element_control.filter(".components_geometry").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_element=value_elements.children(".components_geometry"),geometry_switch=inner_element.find(".components-geometry-switch");null!=import_data["minecraft:geometry"]?(geometry_switch.val("val_geometry"),inner_element.find(".components-geometry").val(import_data["minecraft:geometry"])):geometry_switch.val("val_cube"),changeSwitchable(geometry_switch)}if(is_exist=null!=import_data["minecraft:material_instances"],changeElement(element_control.filter(".components_material_instances").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_element=value_elements.children(".components_material_instances"),key=Object.keys(import_data["minecraft:material_instances"]);for(let index=0;index<key.length;index++){0!=index&&addArrayElement(inner_element.closestOpposite(".value-input"));const key_name=key[index],data=import_data["minecraft:material_instances"][key_name];inner_element.find(".components-material-instances-face").eq(index).val(key_name);const instances_switch=inner_element.find(".components-material-instances-switch").eq(index);if("object"==typeof data){instances_switch.val("val_definition");let json_content=data.texture;null!=json_content&&inner_element.find(".components-material-instances-texture").eq(index).val(json_content),json_content=data.render_method,null!=json_content&&inner_element.find(".components-material-instances-material").eq(index).val(json_content)}else"string"==typeof data&&(instances_switch.val("val_refer"),inner_element.find(".components-material-instances-refer-face").eq(index).val(data));changeSwitchable(instances_switch)}}if(is_exist=null!=import_data["minecraft:entity_collision"],changeElement(element_control.filter(".components_entity_collision").find(".element-control-switch").prop("checked",is_exist)),is_exist){const json_inner=import_data["minecraft:entity_collision"],element_inner=value_elements.children(".components_entity_collision"),collision_switch=element_inner.find(".components-entity-collision-switch");if("boolean"==typeof json_inner)collision_switch.val("val_simple"),element_inner.find(".components-entity-collision-simple").prop("checked",json_inner);else{collision_switch.val("val_details");let json_content=json_inner.origin;null!=json_content&&(element_inner.find(".components-entity-collision-origin-x").val(json_content[0]),element_inner.find(".components-entity-collision-origin-y").val(json_content[1]),element_inner.find(".components-entity-collision-origin-z").val(json_content[2])),json_content=json_inner.size,null!=json_content&&(element_inner.find(".components-entity-collision-size-x").val(json_content[0]),element_inner.find(".components-entity-collision-size-y").val(json_content[1]),element_inner.find(".components-entity-collision-size-z").val(json_content[2]))}changeSwitchable(collision_switch)}if(is_exist=null!=import_data["minecraft:pick_collision"],changeElement(element_control.filter(".components_pick_collision").find(".element-control-switch").prop("checked",is_exist)),is_exist){const json_inner=import_data["minecraft:pick_collision"],element_inner=value_elements.children(".components_pick_collision"),collision_switch=element_inner.find(".components-pick-collision-switch");if("boolean"==typeof json_inner)collision_switch.val("val_simple"),element_inner.find(".components-pick-collision-simple").prop("checked",json_inner);else{collision_switch.val("val_details");let json_content=json_inner.origin;null!=json_content&&(element_inner.find(".components-pick-collision-origin-x").val(json_content[0]),element_inner.find(".components-pick-collision-origin-y").val(json_content[1]),element_inner.find(".components-pick-collision-origin-z").val(json_content[2])),json_content=json_inner.size,null!=json_content&&(element_inner.find(".components-pick-collision-size-x").val(json_content[0]),element_inner.find(".components-pick-collision-size-y").val(json_content[1]),element_inner.find(".components-pick-collision-size-z").val(json_content[2]))}changeSwitchable(collision_switch)}if(is_exist=null!=import_data["minecraft:rotation"],changeElement(element_control.filter(".components_rotation").find(".element-control-switch").prop("checked",is_exist)),is_exist&&(value_elements.children(".components_rotation").find(".components-rotation-x").val(import_data["minecraft:rotation"][0]),value_elements.children(".components_rotation").find(".components-rotation-y").val(import_data["minecraft:rotation"][1]),value_elements.children(".components_rotation").find(".components-rotation-z").val(import_data["minecraft:rotation"][2])),is_exist=null!=import_data["minecraft:breathability"],changeElement(element_control.filter(".components_breathability").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_breathability").find(".components-breathability").val(import_data["minecraft:breathability"]),is_exist=null!=import_data["minecraft:block_light_absorption"],changeElement(element_control.filter(".components_block_light_absorption").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_absorption").find(".components-block-light-absorption").val(import_data["minecraft:block_light_absorption"]),is_exist=null!=import_data["minecraft:block_light_emission"],changeElement(element_control.filter(".components_block_light_emission").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_emission").find(".components-block-light-emission").val(import_data["minecraft:block_light_emission"]),is_exist=null!=import_data["minecraft:destroy_time"],changeElement(element_control.filter(".components_destroy_time").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_destroy_time").find(".components-destroy-time").val(import_data["minecraft:destroy_time"]),is_exist=null!=import_data["minecraft:explosion_resistance"],changeElement(element_control.filter(".components_explosion_resistance").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_explosion_resistance").find(".components-explosion-resistance").val(import_data["minecraft:explosion_resistance"]),is_exist=null!=import_data["minecraft:breakonpush"],changeElement(element_control.filter(".components_breakonpush").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_breakonpush").find(".components-breakonpush").prop("checked",import_data["minecraft:breakonpush"]),is_exist=null!=import_data["minecraft:immovable"],changeElement(element_control.filter(".components_immovable").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_immovable").find(".components-immovable").prop("checked",import_data["minecraft:immovable"]),is_exist=null!=import_data["minecraft:onlypistonpush"],changeElement(element_control.filter(".components_onlypistonpush").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_onlypistonpush").find(".components-onlypistonpush").prop("checked",import_data["minecraft:onlypistonpush"]),is_exist=null!=import_data["minecraft:friction"],changeElement(element_control.filter(".components_friction").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_friction").find(".components-friction").val(import_data["minecraft:friction"]),is_exist=null!=import_data["minecraft:flammable"],changeElement(element_control.filter(".components_flammable").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:flammable"],inner_element=value_elements.children(".components_flammable");null!=inner_json.flame_odds&&inner_element.find(".components-flammable-flame-odds").val(inner_json.flame_odds),null!=inner_json.burn_odds&&inner_element.find(".components-flammable-burn-odds").val(inner_json.burn_odds)}if(is_exist=null!=import_data["minecraft:on_fall_on"],changeElement(element_control.filter(".components_event_on_fall_on").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_fall_on"],inner_element=value_elements.children(".components_event_on_fall_on");null!=inner_json.event&&inner_element.find(".components-event-on-fall-on-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-fall-on-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-fall-on-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_interact"],changeElement(element_control.filter(".components_event_on_interact").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_interact"],inner_element=value_elements.children(".components_event_on_interact");null!=inner_json.event&&inner_element.find(".components-event-on-interact-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-interact-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-interact-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_placed"],changeElement(element_control.filter(".components_event_on_placed").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_placed"],inner_element=value_elements.children(".components_event_on_placed");null!=inner_json.event&&inner_element.find(".components-event-on-placed-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-placed-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-placed-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_player_placing"],changeElement(element_control.filter(".components_event_on_player_placing").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_player_placing"],inner_element=value_elements.children(".components_event_on_player_placing");null!=inner_json.event&&inner_element.find(".components-event-on-player-placing-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-player-placing-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-player-placing-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_step_on"],changeElement(element_control.filter(".components_event_on_step_on").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_step_on"],inner_element=value_elements.children(".components_event_on_step_on");null!=inner_json.event&&inner_element.find(".components-event-on-step-on-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-step-on-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-step-on-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_step_off"],changeElement(element_control.filter(".components_event_on_step_off").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_step_off"],inner_element=value_elements.children(".components_event_on_step_off");null!=inner_json.event&&inner_element.find(".components-event-on-step-off-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-step-off-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-step-off-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:on_player_destroyed"],changeElement(element_control.filter(".components_event_on_player_destroyed").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:on_player_destroyed"],inner_element=value_elements.children(".components_event_on_player_destroyed");null!=inner_json.event&&inner_element.find(".components-event-on-player-destroyed-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".components-event-on-player-destroyed-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".components-event-on-player-destroyed-target").val(inner_json.target)}if(is_exist=null!=import_data["minecraft:ticking"],changeElement(element_control.filter(".components_event_ticking").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:ticking"],inner_element=value_elements.children(".components_event_ticking");null!=inner_json.on_tick&&(null!=inner_json.on_tick.event&&inner_element.find(".components-event-ticking-event").val(inner_json.on_tick.event),null!=inner_json.on_tick.condition&&inner_element.find(".components-event-ticking-condition").val(inner_json.on_tick.condition),null!=inner_json.on_tick.target&&inner_element.find(".components-event-ticking-target").val(inner_json.on_tick.target)),null!=inner_json.range&&(inner_element.find(".components-event-ticking-range-x").val(inner_json.range[0]),inner_element.find(".components-event-ticking-range-z").val(inner_json.range[1])),null!=inner_json.looping&&inner_element.find(".components-event-ticking-looping").val(inner_json.looping)}if(is_exist=null!=import_data["minecraft:random_ticking"],changeElement(element_control.filter(".components_event_random_ticking").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:random_ticking"],inner_element=value_elements.children(".components_event_random_ticking");null!=inner_json.on_tick&&(null!=inner_json.on_tick.event&&inner_element.find(".components-event-random-ticking-event").val(inner_json.on_tick.event),null!=inner_json.on_tick.condition&&inner_element.find(".components-event-random-ticking-condition").val(inner_json.on_tick.condition),null!=inner_json.on_tick.target&&inner_element.find(".components-event-random-ticking-target").val(inner_json.on_tick.target))}break;case"1.16.0":if(is_exist=null!=import_data["minecraft:loot"],changeElement(element_control.filter(".components_loot").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_loot").find(".components-loot").val(import_data["minecraft:loot"]),is_exist=null!=import_data["minecraft:map_color"],changeElement(element_control.filter(".components_map_color").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_map_color").find(".components-map-color").val(import_data["minecraft:map_color"]),is_exist=null!=import_data["minecraft:block_light_absorption"],changeElement(element_control.filter(".components_block_light_absorption").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_absorption").find(".components-block-light-absorption").val(import_data["minecraft:block_light_absorption"]),is_exist=null!=import_data["minecraft:block_light_emission"],changeElement(element_control.filter(".components_block_light_emission").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_emission").find(".components-block-light-emission").val(import_data["minecraft:block_light_emission"]),is_exist=null!=import_data["minecraft:destroy_time"],changeElement(element_control.filter(".components_destroy_time").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_destroy_time").find(".components-destroy-time").val(import_data["minecraft:destroy_time"]),is_exist=null!=import_data["minecraft:explosion_resistance"],changeElement(element_control.filter(".components_explosion_resistance").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_explosion_resistance").find(".components-explosion-resistance").val(import_data["minecraft:explosion_resistance"]),is_exist=null!=import_data["minecraft:friction"],changeElement(element_control.filter(".components_friction").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_friction").find(".components-friction").val(import_data["minecraft:friction"]),is_exist=null!=import_data["minecraft:flammable"],changeElement(element_control.filter(".components_flammable").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:flammable"],inner_element=value_elements.children(".components_flammable");null!=inner_json.flame_odds&&inner_element.find(".components-flammable-flame-odds").val(inner_json.flame_odds),null!=inner_json.burn_odds&&inner_element.find(".components-flammable-burn-odds").val(inner_json.burn_odds)}break;case"1.12.0":if(is_exist=null!=import_data["minecraft:loot"].table,changeElement(element_control.filter(".components_loot").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_loot").find(".components-loot").val(import_data["minecraft:loot"].table),is_exist=null!=import_data["minecraft:map_color"].color,changeElement(element_control.filter(".components_map_color").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_map_color").find(".components-map-color").val(import_data["minecraft:map_color"].color),is_exist=null!=import_data["minecraft:block_light_absorption"].value,changeElement(element_control.filter(".components_block_light_absorption").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_absorption").find(".components-block-light-absorption").val(import_data["minecraft:block_light_absorption"].value),is_exist=null!=import_data["minecraft:block_light_emission"].emission,changeElement(element_control.filter(".components_block_light_emission").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_block_light_emission").find(".components-block-light-emission").val(import_data["minecraft:block_light_emission"].emission),is_exist=null!=import_data["minecraft:destroy_time"].value,changeElement(element_control.filter(".components_destroy_time").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_destroy_time").find(".components-destroy-time").val(import_data["minecraft:destroy_time"].value),is_exist=null!=import_data["minecraft:explosion_resistance"].value,changeElement(element_control.filter(".components_explosion_resistance").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_explosion_resistance").find(".components-explosion-resistance").val(import_data["minecraft:explosion_resistance"].value),is_exist=null!=import_data["minecraft:friction"].value,changeElement(element_control.filter(".components_friction").find(".element-control-switch").prop("checked",is_exist)),is_exist&&value_elements.children(".components_friction").find(".components-friction").val(import_data["minecraft:friction"].value),is_exist=null!=import_data["minecraft:flammable"],changeElement(element_control.filter(".components_flammable").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=import_data["minecraft:flammable"],inner_element=value_elements.children(".components_flammable");null!=inner_json.flame_odds&&inner_element.find(".components-flammable-flame-odds").val(inner_json.flame_odds),null!=inner_json.burn_odds&&inner_element.find(".components-flammable-burn-odds").val(inner_json.burn_odds)}}}function setEventResponses(element_scope,json_data){const element_control=element_scope.closestOpposite(".editor-element-footer.element-control .modal-body").children(),value_elements=element_scope.closestOpposite(".editor-element-body");let is_exist=null!=json_data.set_block_property;if(changeElement(element_control.filter(".event_responses_set_block_property").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_element=value_elements.children(".event_responses_set_block_property"),keys=Object.keys(json_data.set_block_property);for(let index=0;index<keys.length;index++){0!=index&&addArrayElement(inner_element.closestOpposite(".value-input.type-array-modal"));const key=keys[index];inner_element.find(".event-responses-set-block-state").eq(index).val(key),inner_element.find(".event-responses-set-block-value").eq(index).val(json_data.set_block_property[key])}}if(is_exist=null!=json_data.set_block,changeElement(element_control.filter(".event_responses_set_block").find(".element-control-switch").prop("checked",is_exist)),is_exist){const block_type=json_data.set_block.block_type;null!=block_type&&value_elements.children(".event_responses_set_block").find(".event-responses-set-block").val("object"==typeof block_type?JSON.stringify(block_type):block_type)}if(is_exist=null!=json_data.set_block_at_pos,changeElement(element_control.filter(".event_responses_set_block_at_pos").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_element=value_elements.children(".event_responses_set_block_at_pos"),inner_json=json_data.set_block_at_pos,block_type=inner_json.block_type;null!=block_type&&inner_element.find(".event-responses-set-block-at-pos-id").val("object"==typeof block_type?JSON.stringify(block_type):block_type),null!=inner_json.block_offset&&(inner_element.find(".event-responses-set-block-at-pos-position-x").val(inner_json.block_offset[0]),inner_element.find(".event-responses-set-block-at-pos-position-y").val(inner_json.block_offset[1]),inner_element.find(".event-responses-set-block-at-pos-position-z").val(inner_json.block_offset[2]))}if(is_exist=null!=json_data.spawn_loot,changeElement(element_control.filter(".event_responses_spawn_loot").find(".element-control-switch").prop("checked",is_exist)),is_exist&&null!=json_data.spawn_loot.table&&value_elements.children(".event_responses_spawn_loot").find(".event-responses-spawn-loot").val(json_data.spawn_loot.table),is_exist=null!=json_data.add_mob_effect,changeElement(element_control.filter(".event_responses_add_mob_effect").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.add_mob_effect,inner_element=value_elements.children(".event_responses_add_mob_effect");null!=inner_json.effect&&inner_element.find(".event-responses-add-mob-effect-id").val(inner_json.effect),null!=inner_json.amplifier&&inner_element.find(".event-responses-add-mob-effect-amplifier").val(inner_json.amplifier),null!=inner_json.duration&&inner_element.find(".event-responses-add-mob-effect-duration").val(inner_json.duration),null!=inner_json.target&&inner_element.find(".event-responses-add-mob-effect-target").val(inner_json.target)}if(is_exist=null!=json_data.remove_mob_effect,changeElement(element_control.filter(".event_responses_remove_mob_effect").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.remove_mob_effect,inner_element=value_elements.children(".event_responses_remove_mob_effect");null!=inner_json.effect&&inner_element.find(".event-responses-remove-mob-effect-id").val(inner_json.effect),null!=inner_json.target&&inner_element.find(".event-responses-remove-mob-effect-target").val(inner_json.target)}if(is_exist=null!=json_data.damage,changeElement(element_control.filter(".event_responses_damage").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.damage,inner_element=value_elements.children(".event_responses_damage");null!=inner_json.effect&&inner_element.find(".event-responses-damage-type").val(inner_json.effect),null!=inner_json.amount&&inner_element.find(".event-responses-damage-amount").val(inner_json.amount),null!=inner_json.target&&inner_element.find(".event-responses-damage-target").val(inner_json.target)}if(is_exist=null!=json_data.decrement_stack,changeElement(element_control.filter(".event_responses_decrement_stack").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.decrement_stack;null!=inner_json.ignore_game_mode&&value_elements.children(".event_responses_decrement_stack").find(".event-responses-decrement-stack-ignore-game-mode").prop("checked",inner_json.ignore_game_mode)}if(is_exist=null!=json_data.die,changeElement(element_control.filter(".event_responses_die").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.die;null!=inner_json.target&&value_elements.children(".event_responses_die").find(".event-responses-die-target").val(inner_json.target)}if(is_exist=null!=json_data.play_effect,changeElement(element_control.filter(".event_responses_play_effect").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.play_effect,inner_element=value_elements.children(".event_responses_play_effect");null!=inner_json.effect&&inner_element.find(".event-responses-play-effect-id").val(inner_json.effect),null!=inner_json.data&&inner_element.find(".event-responses-play-effect-data").val(inner_json.data),null!=inner_json.target&&inner_element.find(".event-responses-play-effect-target").val(inner_json.target)}if(is_exist=null!=json_data.play_sound,changeElement(element_control.filter(".event_responses_play_sound").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.play_sound,inner_element=value_elements.children(".event_responses_play_sound");null!=inner_json.sound&&inner_element.find(".event-responses-play-sound-id").val(inner_json.sound),null!=inner_json.target&&inner_element.find(".event-responses-play-sound-target").val(inner_json.target)}if(is_exist=null!=json_data.teleport,changeElement(element_control.filter(".event_responses_teleport").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.teleport,inner_element=value_elements.children(".event_responses_teleport");null!=inner_json.destination&&(inner_element.find(".event-responses-teleport-destination-x").val(inner_json.destination[0]),inner_element.find(".event-responses-teleport-destination-y").val(inner_json.destination[1]),inner_element.find(".event-responses-teleport-destination-z").val(inner_json.destination[2])),null!=inner_json.max_range&&(inner_element.find(".event-responses-teleport-max-range-x").val(inner_json.max_range[0]),inner_element.find(".event-responses-teleport-max-range-y").val(inner_json.max_range[1]),inner_element.find(".event-responses-teleport-max-range-z").val(inner_json.max_range[2])),null!=inner_json.avoid_water&&inner_element.find(".event-responses-teleport-avoid_water").val(inner_json.avoid_water),null!=inner_json.land_on_block&&inner_element.find(".event-responses-teleport-land-on-block").val(inner_json.land_on_block),null!=inner_json.target&&inner_element.find(".event-responses-teleport-target").val(inner_json.target)}if(is_exist=null!=json_data.transform_item,changeElement(element_control.filter(".event_responses_transform_item").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.transform_item;null!=inner_json.transform&&value_elements.children(".event_responses_transform_item").find(".event-responses-transform-item-id").val(inner_json.transform)}if(is_exist=null!=json_data.trigger,changeElement(element_control.filter(".event_responses_trigger").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.trigger,inner_element=value_elements.children(".event_responses_trigger");null!=inner_json.event&&inner_element.find(".event-responses-trigger-event").val(inner_json.event),null!=inner_json.condition&&inner_element.find(".event-responses-trigger-condition").val(inner_json.condition),null!=inner_json.target&&inner_element.find(".event-responses-trigger-target").val(inner_json.target)}if(is_exist=null!=json_data.run_command,changeElement(element_control.filter(".event_responses_run_command").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.run_command,inner_element=value_elements.children(".event_responses_run_command");if(null!=inner_json.command){const commands=inner_json.command;for(let index=0;index<commands.length;index++)0!=index&&addArrayElement(inner_element.find(".value-input.type-array-string")),inner_element.find(".event-responses-run-command").eq(index).val(inner_json.command)}null!=inner_json.target&&inner_element.find(".event-responses-run-command-target").val(inner_json.target)}if(changeElement(element_control.filter(".event_responses_swing").find(".element-control-switch").prop("checked",null!=json_data.swing)),is_exist=null!=json_data.sequence,changeElement(element_control.filter(".event_responses_sequence").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.sequence,inner_element=value_elements.children(".event_responses_sequence");for(let index=0;index<inner_json.length;index++){const tabpanel=inner_element.closestOpposite(".tabpanel");0!=index&&addTabElement(tabpanel),setEventResponses(tabpanel.closestOpposite(".tab-container").eq(index),inner_json[index])}}if(is_exist=null!=json_data.randomize,changeElement(element_control.filter(".event_responses_randomize").find(".element-control-switch").prop("checked",is_exist)),is_exist){const inner_json=json_data.randomize,inner_element=value_elements.children(".event_responses_randomize");for(let index=0;index<inner_json.length;index++){const tabpanel=inner_element.closestOpposite(".tabpanel");0!=index&&addTabElement(tabpanel),setEventResponses(tabpanel.closestOpposite(".tab-container").eq(index),inner_json[index]),null!=inner_json[index].weight&&tabpanel.closestOpposite(".tab-container").eq(index).find(".event-responses-randomize-weight").val(inner_json[index].weight)}}}$(window).bind("beforeunload",(function(){if(isChanged)return"このページを離れようとしています。"})),$(document).on("change","input,textarea,select",(function(){onChangedJSON(),isChanged=!0})),$(document).on("keyup","input,textarea,select",(function(){onChangedJSON(),isChanged=!0})),$(".separator").on("mousedown",(function(e){is_separator_drag?is_separator_drag&&(is_separator_drag=!1):is_separator_drag=!0})),$(document).on("mouseup",(function(){is_separator_drag=!1,$("html").css("cursor","");const separator=$(".separator");separator.prev().removeClass("drag-lock"),separator.next().removeClass("drag-lock")})),$(document).on("mousemove",(function(e){if(is_separator_drag){$("html").css("cursor","e-resize");const separator=$(".separator");separator.prev().addClass("drag-lock"),separator.next().addClass("drag-lock");const maxwidth=$("html").width()-2,next_width=maxwidth-e.clientX,prev_width=maxwidth-next_width;separator.next().css("flex-basis",next_width),separator.prev().css("flex-basis",prev_width)}})),$(window).resize((function(){$("div.preview").css("display",""),$("div.editor").css("flex-basis",""),$("div.data-check").css("flex-basis",""),help_page_num=5,switchHelp()})),$("#show-help").on("click",(function(){$("#page-help").fadeIn("fast"),switchHelp()})),$("#page-help").on("click",(function(){switchHelp()})),$("div#show-preview").on("click",(function(){const showPreview=$("div#show-preview");$("div.preview").slideToggle(),showPreview.hasClass("active")?showPreview.removeClass("active"):showPreview.addClass("active")})),$("#open-about").on("click",(function(){$("div.page-about").removeClass("about-hide")})),$("#close-about-btn").on("click",(function(){$("div.page-about").addClass("about-hide")})),$("#hamburger-opener").on("click",(function(){$(".switch-element-body").toggleClass("open",$("#hamburger-opener").is(":checked"))})),$('input[name="editor-switch"]').on("click",(function(){let hide=[!0,!0,!0,!0];switch($('input[name="editor-switch"]:checked').val()){case"event":hide[1]=!1;break;case"permutations":hide[2]=!1;break;case"blockState":hide[3]=!1;break;case"main":default:hide[0]=!1}$("#editor-main").toggleClass("hide",hide[0]),$("#editor-event").toggleClass("hide",hide[1]),$("#editor-permutations").toggleClass("hide",hide[2]),$("#editor-blockState").toggleClass("hide",hide[3])})),$(document).on("click",".block-tab-children>input[type=radio]",event=>{const target=$(event.target),tabNumber=Number(target.next(".tab-number").text());target.closest(".block-tabPanel").find(".block-tab-container").removeClass("selected"),target.closest(".block-tabPanel").find(".block-tab-container").eq(tabNumber).addClass("selected")}),$(document).on("click",".add-block-tab-element",event=>{addBlockTabElement($(event.target).closest(".block-tabPanel"))}),$(document).on("click",".remove-block-tab-element",event=>{const target=$(event.target),tab_panel=target.closest(".block-tabPanel");let child=tab_panel.find(".block-tab-body > .block-tab-children"),child_len=child.length;if(child_len<=0)return;let checked_index=0;for(let index=0;index<child_len;index++)if(child.eq(index).find("input[type=radio]").is(":checked")){checked_index=index;break}tab_panel.find(".block-tab-container").eq(checked_index).remove(),child.eq(checked_index).remove(),tab_panel.find(".block-tab-container:first-child").addClass("selected"),child=tab_panel.find(".block-tab-body > .block-tab-children"),child_len=child.length;for(let index=0;index<child_len;index++)child.eq(index).find("input[type=radio]").prop("checked",0==index),child.eq(index).find(".tab-number").text(index)}),$(document).on("change","input.element-control-switch",event=>{changeElement($(event.target)),onChangedJSON()}),$(document).on("click",".switchable-content select",event=>{changeSwitchable($(event.target))}),$(document).on("click",".tab-children>input[type=radio]",event=>{const target=$(event.target),tabNumber=Number(target.next(".tab-number").text());target.closest(".tabpanel").children(".tab-contents").children(".tab-container").removeClass("selected").eq(tabNumber).addClass("selected")}),$(document).on("click",".add-tab-element",event=>{addTabElement($(event.target).closest(".tabpanel")),onChangedJSON()}),$(document).on("click",".remove-tab-element",event=>{const target=$(event.target),tab_panel=target.closest(".tabpanel");let child=tab_panel.children(".tab-navigation").find(".tab-body > .tab-children"),child_len=child.length;if(child_len<=1)return;let checked_index=0;for(let index=0;index<child_len;index++)if(child.eq(index).find("input[type=radio]").is(":checked")){checked_index=index;break}target.closest(".tabpanel").children(".tab-contents").children(".tab-container").eq(checked_index).remove(),child.eq(checked_index).remove(),target.closest(".tabpanel").children(".tab-contents").children(".tab-container:first-child").addClass("selected"),child=tab_panel.children(".tab-navigation").find(".tab-body > .tab-children"),child_len=child.length;for(let index=0;index<child_len;index++)child.eq(index).find("input[type=radio]").prop("checked",0==index),child.eq(index).find(".tab-number").text(index);onChangedJSON()}),$(document).on("click","input.add-array-element",event=>{addArrayElement($(event.target).closest(".value-input")),onChangedJSON()}),$(document).on("click","input.remove-array-element",event=>{const list=$(event.target).closest(".value-input").find(".array-list .array-data");list.length<=1||(list.filter(".array-data:last-child").remove(),onChangedJSON())}),$(document).on("click",".modal-open",event=>{$(event.target).closest(".type-modal").children(".modal").removeClass("hide"),event.stopPropagation()}),$(document).on("click",".modal",event=>{const click_element=$(event.target);click_element.children(".modal-dialog").length&&click_element.closest(".type-modal").children(".modal").addClass("hide"),event.stopPropagation()}),$(document).on("click",".modal-close",event=>{const click_element=$(event.target);click_element.closest(".type-modal").children(".modal").addClass("hide")}),$("#issue-control").on("click",(function(){const control_bar_img=$("div.issue-status-label svg");control_bar_img.hasClass("close")?control_bar_img.attr("class","open"):control_bar_img.attr("class","close"),$("div.issue-content").slideToggle()})),$("#event-add").on("click",()=>{addEvent(),onChangedJSON()}),$(document).on("click","input.event-delete",event=>{$(event.target).closest(".status-block-content").remove(),onChangedJSON()}),$("#blockState-add").on("click",()=>{addBlockState(),onChangedJSON()}),$(document).on("click","input.blockState-delete",event=>{$(event.target).closest(".status-block-content").remove(),onChangedJSON()}),navigator.share&&($("#page-share").addClass("supported"),$("#page-share").on("click",async()=>{await navigator.share({title:"とかさんの Block Generator",text:"とかさんの Block Generator -block jsonを簡単に作成・編集-",url:"https://toka7290.github.io/TokaBlockGenerator/"})})),$("#input-file").on("change",(function(){importJsonFile()})),$(document).on("dragenter dragover",(function(event){event.stopPropagation(),event.preventDefault(),$(".file-drop-zone").removeClass("hide")})),$(".file-drop-zone,.file-drop-zone-textarea").on("dragleave",(function(event){event.stopPropagation(),event.preventDefault(),$(".file-drop-zone").addClass("hide")})),$(document).on("drop",(function(_event){isChanged=!0,$(".file-drop-zone").addClass("hide");var event=_event;_event.originalEvent&&(event=_event.originalEvent),event.stopPropagation(),event.preventDefault(),$("#input-file").prop("files",event.dataTransfer.files),importJsonFile()})),$("#control-copy").on("click",(function(){const codeBuffer=$("textarea#code-buffer");codeBuffer.select(),document.execCommand("copy"),$("p#control-copy-text").text("Copied"),codeBuffer.blur(),setTimeout((function(){$("p#control-copy-text").text("Copy")}),1e3)})),$("#control-download").on("click",(function(){let content=$("textarea#code-buffer").val();$("<a></a>",{href:window.URL.createObjectURL(new Blob([content])),download:"manifest.json",target:"_blank"})[0].click()})),$(document).on("change",".components-map-color",event=>{$(event.target).closest(".type-color").find(".components-map-color-pick").val($(event.target).val())}),$(document).on("change",".components-map-color-pick",event=>{$(event.target).closest(".type-color").find(".components-map-color").val($(event.target).val()),onChangedJSON()}),$(document).on("change",".components-block-light-emission",event=>{const target=$(event.target);target.next(".components-block-light-emission-eq").text(`= ${`  ${Math.round(15*parseFloat(target.val()))}`.slice(-2)}`)}),$("#format-version").on("change",(function(){onChangedFormatVersion()})),$(window).on("load",()=>{setFormatJson()}),$.fn.closestOpposite=function(selector){let children=this.children();return 0===children.length?$():this.filter(selector).length?this.filter(selector):children.closestOpposite(selector)};